<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salem University Student Interview</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .recording {
            animation: pulse 1.5s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Check if we're on HTTPS or localhost (required for speech recognition on Android)
        const isSecureContext = window.isSecureContext || window.location.protocol === 'https:' || window.location.hostname === 'localhost';

        const questions = [
            {
                id: 1,
                section: "THE DECISION",
                text: "Take me back to the exact moment you first heard about Salem or first seriously considered it. Where were you? What was your immediate reaction? What did you say out loud or think to yourself?"
            },
            {
                id: 2,
                section: "THE DECISION",
                text: "What other schools were you seriously considering? What made you hesitate about Salem specifically compared to those other options? What were your biggest concerns or doubts about choosing Salem?"
            },
            {
                id: 3,
                section: "THE DECISION",
                text: "What was the moment or conversation that made you think 'okay, maybe this is the place'? What tipped the scales?"
            },
            {
                id: 4,
                section: "THE DECISION",
                text: "How would you compare your actual experience at Salem to what you think it would have been at the other school(s) you were considering? What would you have missed out on if you'd chosen differently?"
            },
            {
                id: 5,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "What surprised you most in your first semester? Give me at least 3 specific things that were completely different than you expected - both good surprises and challenging ones."
            },
            {
                id: 6,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "Tell me about a moment when you realized you made the right choice to come to Salem. What was happening? Where were you? Who were you with?"
            },
            {
                id: 7,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "Tell me specifically WHERE you were and WHO you were with during that moment. What were the exact circumstances? Paint me a picture with details - include professor names, course names, building names, time of day."
            },
            {
                id: 8,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "Making friends in college can be scary. Tell me about your first real friendship here - how did it happen? How long did it take to find 'your people'?"
            },
            {
                id: 9,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "Describe a typical weekend or evening hanging out with friends at Salem. What do you actually do? Where do you go? What makes it fun?"
            },
            {
                id: 10,
                section: "ARRIVING & FIRST IMPRESSIONS",
                text: "Tell me about a campus tradition, event, or moment that made you feel like you really belong here. Be specific."
            },
            {
                id: 11,
                section: "YOUR PROGRAM EXPERIENCE",
                text: "Tell me everything about your major/program. What makes Salem's program different from other schools? What are the standout features?"
            },
            {
                id: 12,
                section: "YOUR PROGRAM EXPERIENCE",
                text: "Tell me about your favorite class or learning experience in your program. What made it memorable? (Include the course name, professor's name, and what you actually did in the class.)"
            },
            {
                id: 13,
                section: "YOUR PROGRAM EXPERIENCE",
                text: "How hands-on is your program? Give me examples of projects, labs, simulations, fieldwork, internships, or practical experience you've gotten."
            },
            {
                id: 14,
                section: "CHALLENGES & GROWTH",
                text: "Was there a time you struggled or doubted yourself at Salem? Tell me about your lowest moment - the day or week when you seriously wondered if you'd made a mistake. What happened?"
            },
            {
                id: 15,
                section: "CHALLENGES & GROWTH",
                text: "How did you get through that difficult time? What was the turning point? Who or what helped you? (Please include specific names and resources.)"
            },
            {
                id: 16,
                section: "CHALLENGES & GROWTH",
                text: "What was your biggest academic challenge here, and how did Salem's support systems help you through it? Be specific about resources, people, or programs."
            },
            {
                id: 17,
                section: "CHALLENGES & GROWTH",
                text: "Did you worry about safety, belonging, or being accepted for who you are before you came to Salem? How has that actually played out?"
            },
            {
                id: 18,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "What opportunity at Salem have you taken advantage of that you didn't even know existed when you enrolled?"
            },
            {
                id: 19,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "Who's been unexpectedly important to your success here? Tell me about a professor, staff member, advisor, peer, or mentor who made a real difference. (Include their full name and title.)"
            },
            {
                id: 20,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "How has Salem prepared you for your career, specifically? Talk about internships, connections, hands-on experience, job placement support, or skills you've gained."
            },
            {
                id: 21,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "What are you doing after graduation, or what are your plans? How did Salem set you up for this next step?"
            },
            {
                id: 22,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "How are you different now than when you started? What's changed about how you see yourself or your future?"
            },
            {
                id: 23,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "What's one thing you've accomplished here that you genuinely didn't think you could do when you first arrived?"
            },
            {
                id: 24,
                section: "OPPORTUNITIES & TRANSFORMATION",
                text: "Walk me through a specific day or moment that exemplifies this accomplishment. Where were you? What was said? Who was there? Give me the scene in detail."
            },
            {
                id: 25,
                section: "ADVICE & REAL TALK",
                text: "If you could go back and talk to yourself the day before you started at Salem, what would you say?"
            },
            {
                id: 26,
                section: "ADVICE & REAL TALK",
                text: "What advice would you give to someone who's in the exact position you were in when you were deciding whether to apply to Salem?"
            },
            {
                id: 27,
                section: "ADVICE & REAL TALK",
                text: "Cost is a huge concern for students and families. How has Salem's value played out for you - not just tuition, but the whole investment? Any financial surprises, good or bad?"
            },
            {
                id: 28,
                section: "ADVICE & REAL TALK",
                text: "What do you wish you'd known earlier that would have made your experience even better?"
            },
            {
                id: 29,
                section: "ADVICE & REAL TALK",
                text: "What's something about Salem that doesn't show up in the brochures or website but made a real difference for you?"
            },
            {
                id: 30,
                section: "ADVICE & REAL TALK",
                text: "If you had to describe your Salem experience in one sentence to someone considering applying, what would you say?"
            },
            {
                id: 31,
                section: "STUDENT DETAILS",
                text: "Please provide your details: Full name, Major/program (exact name), Class year, Hometown (city, state), Leadership positions/clubs/sports/organizations, Awards/honors/achievements"
            },
            {
                id: 32,
                section: "STUDENT DETAILS",
                text: "Is there anything else about your Salem experience that I didn't ask about but that you think is important for prospective students to know?"
            }
        ];

        function InterviewApp() {
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [isRecording, setIsRecording] = useState(false);
            const [recognition, setRecognition] = useState(null);
            const [showWelcome, setShowWelcome] = useState(true);
            const [studentName, setStudentName] = useState('');
            const [speechSupported, setSpeechSupported] = useState(false);
            const [speechError, setSpeechError] = useState('');
            const textareaRef = useRef(null);

            // Load saved progress from localStorage
            useEffect(() => {
                const saved = localStorage.getItem('salem-interview-progress');
                if (saved) {
                    const data = JSON.parse(saved);
                    setAnswers(data.answers || {});
                    setCurrentQuestion(data.currentQuestion || 0);
                    setStudentName(data.studentName || '');
                }
            }, []);

            // Save progress to localStorage
            useEffect(() => {
                if (!showWelcome) {
                    localStorage.setItem('salem-interview-progress', JSON.stringify({
                        answers,
                        currentQuestion,
                        studentName,
                        lastSaved: new Date().toISOString()
                    }));
                }
            }, [answers, currentQuestion, studentName, showWelcome]);

            // Initialize speech recognition
            useEffect(() => {
                // Check for speech recognition support
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                
                if (!SpeechRecognition) {
                    setSpeechError('Speech recognition is not supported in this browser.');
                    return;
                }

                if (!isSecureContext) {
                    setSpeechError('Speech recognition requires HTTPS. Please host this page on a secure server.');
                    return;
                }

                try {
                    const recognitionInstance = new SpeechRecognition();
                    
                    // Configuration for better mobile support
                    recognitionInstance.continuous = true;
                    recognitionInstance.interimResults = true;
                    recognitionInstance.lang = 'en-US';
                    recognitionInstance.maxAlternatives = 1;

                    let finalTranscriptAccumulator = '';

                    recognitionInstance.onstart = () => {
                        console.log('Speech recognition started');
                        setIsRecording(true);
                        setSpeechError('');
                        finalTranscriptAccumulator = answers[questions[currentQuestion].id] || '';
                    };

                    recognitionInstance.onresult = (event) => {
                        let interimTranscript = '';
                        let finalTranscript = '';

                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            const transcript = event.results[i][0].transcript;
                            if (event.results[i].isFinal) {
                                finalTranscript += transcript + ' ';
                            } else {
                                interimTranscript += transcript;
                            }
                        }

                        if (finalTranscript) {
                            finalTranscriptAccumulator += finalTranscript;
                            setAnswers(prev => ({
                                ...prev,
                                [questions[currentQuestion].id]: finalTranscriptAccumulator
                            }));
                        }
                    };

                    recognitionInstance.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        setIsRecording(false);
                        
                        switch(event.error) {
                            case 'not-allowed':
                            case 'permission-denied':
                                setSpeechError('Microphone permission denied. Please enable microphone access in your browser settings.');
                                break;
                            case 'no-speech':
                                setSpeechError('No speech detected. Please try again.');
                                break;
                            case 'network':
                                setSpeechError('Network error. Speech recognition requires an internet connection.');
                                break;
                            case 'aborted':
                                // User stopped recording, this is normal
                                break;
                            default:
                                setSpeechError(`Speech recognition error: ${event.error}`);
                        }
                    };

                    recognitionInstance.onend = () => {
                        console.log('Speech recognition ended');
                        setIsRecording(false);
                    };

                    setRecognition(recognitionInstance);
                    setSpeechSupported(true);
                } catch (error) {
                    console.error('Failed to initialize speech recognition:', error);
                    setSpeechError('Failed to initialize speech recognition. Please try typing instead.');
                }
            }, []);

            const toggleRecording = async () => {
                if (!recognition) {
                    alert('Speech recognition is not available. Please check:\n\n1. Are you using HTTPS? (required on Android)\n2. Have you granted microphone permission?\n3. Is your browser up to date?\n\nYou can still type your answers.');
                    return;
                }

                if (isRecording) {
                    try {
                        recognition.stop();
                    } catch (error) {
                        console.error('Error stopping recognition:', error);
                        setIsRecording(false);
                    }
                } else {
                    try {
                        setSpeechError('');
                        await recognition.start();
                    } catch (error) {
                        console.error('Error starting recognition:', error);
                        
                        if (error.message && error.message.includes('already started')) {
                            // Recognition already running, stop it first
                            recognition.stop();
                            setTimeout(() => {
                                recognition.start();
                            }, 100);
                        } else {
                            setSpeechError('Could not start recording. Please check microphone permissions.');
                        }
                    }
                }
            };

            const handleTextChange = (e) => {
                setAnswers(prev => ({
                    ...prev,
                    [questions[currentQuestion].id]: e.target.value
                }));
            };

            const goToNext = () => {
                if (currentQuestion < questions.length - 1) {
                    if (isRecording && recognition) {
                        try {
                            recognition.stop();
                        } catch (error) {
                            console.error('Error stopping recognition:', error);
                        }
                    }
                    setCurrentQuestion(currentQuestion + 1);
                }
            };

            const goToPrevious = () => {
                if (currentQuestion > 0) {
                    if (isRecording && recognition) {
                        try {
                            recognition.stop();
                        } catch (error) {
                            console.error('Error stopping recognition:', error);
                        }
                    }
                    setCurrentQuestion(currentQuestion - 1);
                }
            };

            const skipQuestion = () => {
                goToNext();
            };

            const exportAnswers = () => {
                const exportData = {
                    studentName,
                    completedDate: new Date().toISOString(),
                    answers: questions.map(q => ({
                        questionId: q.id,
                        section: q.section,
                        question: q.text,
                        answer: answers[q.id] || '[Not answered]'
                    }))
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `salem-interview-${studentName.replace(/\s+/g, '-').toLowerCase()}-${Date.now()}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const exportAsText = () => {
                let textContent = `SALEM UNIVERSITY STUDENT INTERVIEW\n`;
                textContent += `Student: ${studentName}\n`;
                textContent += `Completed: ${new Date().toLocaleDateString()}\n`;
                textContent += `\n${'='.repeat(80)}\n\n`;

                questions.forEach(q => {
                    textContent += `${q.section}\n`;
                    textContent += `Q${q.id}: ${q.text}\n\n`;
                    textContent += `Answer: ${answers[q.id] || '[Not answered]'}\n\n`;
                    textContent += `${'-'.repeat(80)}\n\n`;
                });

                const blob = new Blob([textContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `salem-interview-${studentName.replace(/\s+/g, '-').toLowerCase()}-${Date.now()}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const resetInterview = () => {
                if (confirm('Are you sure you want to start over? This will delete all your answers.')) {
                    localStorage.removeItem('salem-interview-progress');
                    setAnswers({});
                    setCurrentQuestion(0);
                    setStudentName('');
                    setShowWelcome(true);
                }
            };

            const currentAnswer = answers[questions[currentQuestion].id] || '';
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            const answeredCount = Object.keys(answers).filter(key => answers[key]?.trim()).length;

            if (showWelcome) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 flex items-center justify-center">
                        <div className="max-w-md w-full bg-white rounded-2xl shadow-xl p-8">
                            <div className="text-center mb-8">
                                <h1 className="text-3xl font-bold text-gray-900 mb-2">Salem University</h1>
                                <p className="text-lg text-gray-600">Student Interview</p>
                            </div>
                            
                            <div className="mb-6">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Your Name
                                </label>
                                <input
                                    type="text"
                                    value={studentName}
                                    onChange={(e) => setStudentName(e.target.value)}
                                    placeholder="Enter your full name"
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                            </div>

                            <div className="bg-blue-50 rounded-lg p-4 mb-6">
                                <h3 className="font-semibold text-gray-900 mb-2">How it works:</h3>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li className="flex items-start">
                                        <span className="mr-2">🎤</span>
                                        <span>Tap the microphone to speak your answer</span>
                                    </li>
                                    <li className="flex items-start">
                                        <span className="mr-2">⌨️</span>
                                        <span>Or type your response</span>
                                    </li>
                                    <li className="flex items-start">
                                        <span className="mr-2">💾</span>
                                        <span>Your progress saves automatically</span>
                                    </li>
                                    <li className="flex items-start">
                                        <span className="mr-2">⏭️</span>
                                        <span>Skip questions if you prefer</span>
                                    </li>
                                </ul>
                            </div>

                            {/* Speech Recognition Status */}
                            {!isSecureContext && (
                                <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                                    <div className="flex items-start">
                                        <span className="text-yellow-600 mr-2">⚠️</span>
                                        <div className="text-sm text-yellow-800">
                                            <strong>Voice recording unavailable:</strong> This page must be accessed via HTTPS for voice features to work on Android devices. You can still type all your answers.
                                        </div>
                                    </div>
                                </div>
                            )}

                            {speechError && isSecureContext && (
                                <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                                    <div className="flex items-start">
                                        <span className="text-red-600 mr-2">❌</span>
                                        <div className="text-sm text-red-800">
                                            <strong>Voice recording unavailable:</strong> {speechError}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {speechSupported && isSecureContext && !speechError && (
                                <div className="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                                    <div className="flex items-start">
                                        <span className="text-green-600 mr-2">✓</span>
                                        <div className="text-sm text-green-800">
                                            <strong>Voice recording ready!</strong> Tap the microphone button when answering questions.
                                        </div>
                                    </div>
                                </div>
                            )}

                            <button
                                onClick={() => studentName.trim() && setShowWelcome(false)}
                                disabled={!studentName.trim()}
                                className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
                            >
                                Start Interview
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-200 sticky top-0 z-10">
                        <div className="max-w-4xl mx-auto px-4 py-3">
                            <div className="flex items-center justify-between mb-2">
                                <h2 className="text-lg font-semibold text-gray-900">{studentName}</h2>
                                <button
                                    onClick={resetInterview}
                                    className="text-sm text-red-600 hover:text-red-700"
                                >
                                    Reset
                                </button>
                            </div>
                            <div className="flex items-center justify-between text-sm text-gray-600 mb-2">
                                <span>Question {currentQuestion + 1} of {questions.length}</span>
                                <span>{answeredCount} answered</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                                    style={{ width: `${progress}%` }}
                                />
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="max-w-4xl mx-auto px-4 py-6">
                        {/* Section Badge */}
                        <div className="mb-4">
                            <span className="inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full">
                                {questions[currentQuestion].section}
                            </span>
                        </div>

                        {/* Question */}
                        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
                            <h3 className="text-xl font-semibold text-gray-900 leading-relaxed">
                                {questions[currentQuestion].text}
                            </h3>
                        </div>

                        {/* Answer Area */}
                        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
                            <div className="flex items-center justify-between mb-3">
                                <label className="block text-sm font-medium text-gray-700">
                                    Your Answer
                                </label>
                                {isRecording && (
                                    <span className="flex items-center text-red-600 text-sm font-medium recording">
                                        <span className="w-2 h-2 bg-red-600 rounded-full mr-2"></span>
                                        Recording...
                                    </span>
                                )}
                            </div>

                            {speechError && (
                                <div className="bg-red-50 border border-red-200 rounded-lg p-3 mb-3">
                                    <div className="flex items-start">
                                        <span className="text-red-600 text-xs mr-2">⚠️</span>
                                        <div className="text-xs text-red-800">{speechError}</div>
                                    </div>
                                </div>
                            )}
                            
                            <textarea
                                ref={textareaRef}
                                value={currentAnswer}
                                onChange={handleTextChange}
                                placeholder="Tap the microphone to speak, or type your answer here..."
                                className="w-full h-48 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                            />

                            <div className="flex items-center justify-between mt-4">
                                <button
                                    onClick={toggleRecording}
                                    disabled={!speechSupported || !isSecureContext}
                                    className={`flex items-center justify-center w-16 h-16 rounded-full transition-all ${
                                        !speechSupported || !isSecureContext
                                            ? 'bg-gray-300 cursor-not-allowed'
                                            : isRecording 
                                            ? 'bg-red-500 hover:bg-red-600' 
                                            : 'bg-blue-600 hover:bg-blue-700'
                                    } text-white shadow-lg`}
                                    title={!speechSupported || !isSecureContext ? 'Voice recording not available - please type instead' : isRecording ? 'Stop recording' : 'Start recording'}
                                >
                                    {isRecording ? (
                                        <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                            <rect x="6" y="6" width="8" height="8" rx="1" />
                                        </svg>
                                    ) : (
                                        <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clipRule="evenodd" />
                                        </svg>
                                    )}
                                </button>

                                <div className="text-sm text-gray-500">
                                    {currentAnswer.length} characters
                                </div>
                            </div>

                            {(!speechSupported || !isSecureContext) && (
                                <div className="mt-3 text-xs text-gray-500 text-center">
                                    Voice recording unavailable. Please type your answers.
                                </div>
                            )}
                        </div>

                        {/* Navigation Buttons */}
                        <div className="flex gap-3 mb-6">
                            <button
                                onClick={goToPrevious}
                                disabled={currentQuestion === 0}
                                className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors"
                            >
                                ← Previous
                            </button>
                            
                            <button
                                onClick={skipQuestion}
                                className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors"
                            >
                                Skip
                            </button>

                            <button
                                onClick={goToNext}
                                disabled={currentQuestion === questions.length - 1}
                                className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
                            >
                                Next →
                            </button>
                        </div>

                        {/* Export Buttons */}
                        {currentQuestion === questions.length - 1 && (
                            <div className="bg-green-50 rounded-xl p-6 border border-green-200">
                                <h3 className="text-lg font-semibold text-gray-900 mb-3">
                                    You've reached the last question!
                                </h3>
                                <p className="text-gray-700 mb-4">
                                    Download your interview responses to share with your advisor.
                                </p>
                                <div className="flex flex-col sm:flex-row gap-3">
                                    <button
                                        onClick={exportAsText}
                                        className="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                                    >
                                        📄 Download as Text
                                    </button>
                                    <button
                                        onClick={exportAnswers}
                                        className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                                    >
                                        💾 Download as JSON
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Question Navigator */}
                        <div className="bg-white rounded-xl shadow-sm p-6 mt-6">
                            <h4 className="text-sm font-semibold text-gray-700 mb-3">Jump to Question:</h4>
                            <div className="grid grid-cols-8 gap-2">
                                {questions.map((q, idx) => (
                                    <button
                                        key={q.id}
                                        onClick={() => {
                                            if (isRecording && recognition) {
                                                try {
                                                    recognition.stop();
                                                } catch (error) {
                                                    console.error('Error stopping recognition:', error);
                                                }
                                            }
                                            setCurrentQuestion(idx);
                                        }}
                                        className={`aspect-square rounded-lg font-semibold text-sm transition-colors ${
                                            idx === currentQuestion
                                                ? 'bg-blue-600 text-white'
                                                : answers[q.id]?.trim()
                                                ? 'bg-green-100 text-green-800 hover:bg-green-200'
                                                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                        }`}
                                    >
                                        {idx + 1}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<InterviewApp />, document.getElementById('root'));
    </script>
</body>
</html>
